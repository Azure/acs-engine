apiVersion: "v1"
kind: "Pod"
metadata:
  name: "kube-controller-manager"
  namespace: "kube-system"
  labels:
    tier: control-plane
    component: kube-controller-manager
spec:
  hostNetwork: true
  containers:
    - name: "kube-controller-manager"
      image: "<kubernetesHyperkubeSpec>"
      command: 
        - "/hyperkube"
        - "controller-manager"
        - "--kubeconfig=/var/lib/kubelet/kubeconfig" # genericize
        - "--allocate-node-cidrs=<allocateNodeCidrs>" # genericize
        - "--cluster-cidr=<kubeClusterCidr>" # genericize
        - "--cluster-name=<masterFqdnPrefix>"
        - "--cloud-provider=azure" # genericize
        - "--cloud-config=/etc/kubernetes/azure.json" # genericize
        - "--root-ca-file=/etc/kubernetes/certs/ca.crt" # genericize
        - "--cluster-signing-cert-file=/etc/kubernetes/certs/ca.crt" # genericize
        - "--cluster-signing-key-file=/etc/kubernetes/certs/ca.key" # genericize
        - "--service-account-private-key-file=/etc/kubernetes/certs/apiserver.key" # genericize
        - "--leader-elect=true" # genericize
        - "<kubernetesEnableRbac>"
        - "--v=2" # genericize
        - "--profiling=false" # genericize
      volumeMounts: 
        - name: "etc-kubernetes"
          mountPath: "/etc/kubernetes"
        - name: "var-lib-kubelet"
          mountPath: "/var/lib/kubelet"
        - name: msi
          mountPath: "/var/lib/waagent/ManagedIdentity-Settings"
          readOnly: true
  volumes:
    - name: "etc-kubernetes"
      hostPath:
        path: "/etc/kubernetes"
    - name: "var-lib-kubelet"
      hostPath:
        path: "/var/lib/kubelet"
    - name: msi
      hostPath:
        path: "/var/lib/waagent/ManagedIdentity-Settings"
